<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mallfe.item.mapper.PsMapper">


    <update id="updateStatusToCancel" parameterType="com.mallfe.item.pojo.Ps">
        update mf_ps set status = 9 where lsh = #{lsh} and status = 0
    </update>

    <update id="updateStatusToOut">
        update mf_ps set status = 1 where lsh = #{lsh} and status = 0
    </update>
    <update id="updateStatusToFinish">
        update mf_ps set status = 2 where lsh = #{lsh} and status = 1
    </update>
    <select id="selectPs" resultType="com.mallfe.item.pojo.Ps">
        select lsh,a.lrid,concat(a.driver_code,'-',b.driver_name) as driverCode,
               concat(a.path_code,'-',c.path_name) as pathCode,a.lrsj,a.fcsj,a.status
        from mf_ps a left join mf_driver b on a.driver_code = b.driver_code
        left join mf_path c on a.path_code = c.path_code

        order by a.lsh desc

    </select>

</mapper>
